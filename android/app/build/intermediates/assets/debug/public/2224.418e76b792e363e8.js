"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2224],{2224:(A,h,r)=>{r.r(h),r.d(h,{LobbyPageModule:()=>k});var m=r(177),b=r(4341),i=r(791),g=r(8986),f=r(6261),u=r(467),t=r(3953),P=r(3656),v=r(671),y=r(369),C=r(1626);let x=(()=>{var n;class s{constructor(e){this.http=e,this.apiUrl="https://jsonplaceholder.typicode.com/posts"}getPosts(){return this.http.get(this.apiUrl)}getPost(e){return this.http.get(`${this.apiUrl}/${e}`)}addPost(e){return this.http.post(this.apiUrl,e)}updatePost(e,o){return this.http.put(`${this.apiUrl}/${e}`,o)}deletePost(e){return this.http.delete(`${this.apiUrl}/${e}`)}}return(n=s).\u0275fac=function(e){return new(e||n)(t.KVO(C.Qq))},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),s})();function M(n,s){if(1&n){const a=t.RV6();t.j41(0,"ion-item")(1,"ion-label")(2,"h2"),t.EFF(3),t.k0s(),t.j41(4,"p"),t.EFF(5),t.k0s()(),t.j41(6,"ion-buttons",19)(7,"ion-button",4),t.bIt("click",function(){const o=t.eBV(a).$implicit,l=t.XpG();return t.Njj(l.editPost(o))}),t.nrm(8,"ion-icon",20),t.k0s(),t.j41(9,"ion-button",4),t.bIt("click",function(){const o=t.eBV(a).$implicit,l=t.XpG();return t.Njj(l.confirmDelete(o.id))}),t.nrm(10,"ion-icon",21),t.k0s()()()}if(2&n){const a=s.$implicit;t.R7$(3),t.JRh(a.title),t.R7$(2),t.JRh(a.body)}}const j=[{path:"",component:(()=>{var n;class s{constructor(e,o,l,d,c,p){this.router=e,this.alertController=o,this.authService=l,this.storage=d,this.apiService=c,this.navCtrl=p,this.nombre_usuario="",this.song=[{title:"Cancion 1",path:"assets/audio/a.mp3"}],this.cancionActual=0,this.nombreAlmacenado=null,this.posts=[],this.initStorage()}initStorage(){var e=this;return(0,u.A)(function*(){yield e.storage.create(),yield e.obtenerNombre()})()}cargarCancion(e){this.audio&&this.audio.pause(),this.audio=new Audio(this.song[e].path),this.audio.play()}obtenerNombre(){var e=this;return(0,u.A)(function*(){e.nombreAlmacenado=yield e.storage.get("nombre"),console.log("Nombre almacenado:",e.nombreAlmacenado)})()}ngOnInit(){var e;const o=this.router.getCurrentNavigation();null!=o&&null!==(e=o.extras)&&void 0!==e&&e.state&&(this.nombre_usuario=o.extras.state.nombre_usuario||"usuario"),this.cargarCancion(this.cancionActual),this.loadPosts()}loadPosts(){this.apiService.getPosts().subscribe(e=>{this.posts=e})}addPosts(){var e=this;return(0,u.A)(function*(){yield(yield e.alertController.create({header:"A\xf1adir Post",inputs:[{name:"title",type:"text",placeholder:"T\xedtulo del Post"},{name:"body",type:"textarea",placeholder:"Contenido del Post"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:l=>{e.apiService.addPost(l).subscribe(d=>{e.posts.push(d)})}}]})).present()})()}editPost(e){var o=this;return(0,u.A)(function*(){yield(yield o.alertController.create({header:"Editar Post",inputs:[{name:"title",type:"text",value:e.title,placeholder:"T\xedtulo del Post"},{name:"body",type:"textarea",value:e.body,placeholder:"Contenido del Post"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:d=>{const c={...e,...d};console.log("Post actualizado:",c),o.apiService.updatePost(c.id,c).subscribe(()=>{const p=o.posts.findIndex(L=>L.id===c.id);p>-1&&(o.posts[p]=c)})}}]})).present()})()}confirmDelete(e){var o=this;return(0,u.A)(function*(){yield(yield o.alertController.create({header:"Eliminar Post",message:"\xbfEst\xe1s seguro de que deseas eliminar este post?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",handler:()=>{o.deletePosts(e)}}]})).present()})()}deletePosts(e){this.apiService.deletePost(e).subscribe(()=>{this.posts=this.posts.filter(o=>o.id!==e)})}canDeactivate(){return confirm("\xbfEst\xe1s seguro que deseas cerrar sesi\xf3n?")}logout(){this.canDeactivate()&&(this.authService.logout(),console.log("Sesi\xf3n cerrada"),this.audio.pause(),this.router.navigate(["/home"]))}presentAlert(e,o,l){var d=this;return(0,u.A)(function*(){yield(yield d.alertController.create({header:e,subHeader:o,message:l,buttons:["OK"]})).present()})()}deletePost(e){this.apiService.deletePost(e).subscribe(()=>{this.posts=this.posts.filter(o=>o.id!==e),console.log("Post Eliminado:",e)})}}return(n=s).\u0275fac=function(e){return new(e||n)(t.rXU(g.Ix),t.rXU(i.hG),t.rXU(v.u),t.rXU(y.w),t.rXU(x),t.rXU(P.q9))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-lobby"]],decls:42,vars:4,consts:[["side","start","menuId","first","contentId","main-content"],["color","primary"],["name","person-circle-outline","slot","start"],["name","settings-outline","slot","start"],[3,"click"],["name","log-out-outline","slot","start"],["id","main-content",3,"fullscreen"],["slot","start"],["id","header"],["id","app-bar"],["id","logo"],["src","assets/lg.png","alt","Logo"],[1,"wrapper"],[1,"form-wrapper"],["id","gif"],["src","assets/cat-space.gif","alt","Logo"],[1,"add-post-btn",3,"click"],["slot","icon-only","name","pencil"],[4,"ngFor","ngForOf"],["slot","end"],["slot","icon-only","name","create"],["slot","icon-only","name","remove"]],template:function(e,o){1&e&&(t.j41(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title"),t.EFF(4,"Men\xfa de Bienvenida"),t.k0s()()(),t.j41(5,"ion-content")(6,"ion-list")(7,"ion-item"),t.nrm(8,"ion-icon",2),t.j41(9,"ion-label"),t.EFF(10),t.k0s()(),t.j41(11,"ion-item"),t.nrm(12,"ion-icon",3),t.j41(13,"ion-label"),t.EFF(14,"Configuraciones"),t.k0s()(),t.j41(15,"ion-item",4),t.bIt("click",function(){return o.logout()}),t.nrm(16,"ion-icon",5),t.j41(17,"ion-label"),t.EFF(18,"Cerrar sesi\xf3n"),t.k0s()()()()(),t.j41(19,"ion-content",6)(20,"ion-header")(21,"ion-toolbar")(22,"ion-buttons",7),t.nrm(23,"ion-menu-button"),t.k0s(),t.j41(24,"ion-title"),t.EFF(25,"Bienvenido"),t.k0s()()(),t.j41(26,"div",8)(27,"div",9)(28,"div",10),t.nrm(29,"img",11),t.k0s()()(),t.j41(30,"div",12)(31,"ion-card",13)(32,"ion-card-content")(33,"h1"),t.EFF(34),t.k0s()(),t.j41(35,"div",14),t.nrm(36,"img",15),t.k0s()()(),t.j41(37,"ion-list")(38,"ion-item")(39,"ion-button",16),t.bIt("click",function(){return o.addPosts()}),t.nrm(40,"ion-icon",17),t.k0s()(),t.DNE(41,M,11,2,"ion-item",18),t.k0s()()),2&e&&(t.R7$(10),t.SpI("Perfil: ",o.nombreAlmacenado,""),t.R7$(9),t.Y8G("fullscreen",!0),t.R7$(15),t.SpI("Hola, bienvenido ",o.nombreAlmacenado,""),t.R7$(7),t.Y8G("ngForOf",o.posts))},dependencies:[m.Sq,i.Jm,i.QW,i.b_,i.I9,i.W9,i.eU,i.iq,i.uz,i.he,i.nf,i.oS,i.MC,i.BC,i.ai],styles:["#header[_ngcontent-%COMP%]{height:20%;background:#ffb800;border-radius:0 0 20px 20px;display:flex;flex-direction:column;color:#fff;padding:5px;box-shadow:0 4px 10px #0003}#header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]{height:10px;display:flex;justify-content:center;align-items:center}#header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]{background-color:#fff;display:flex;justify-content:center;align-items:center;border-radius:95%;padding:10px;box-shadow:0 4px 6px #0000001a;width:90%;height:120px;margin-top:30%}#header[_ngcontent-%COMP%]   #app-bar[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.welcome-message[_ngcontent-%COMP%]{text-align:center;margin-top:20px}#wrapper[_ngcontent-%COMP%]{margin-top:40px}ion-card[_ngcontent-%COMP%]{padding:15px;margin-top:20px;color:#ffb800}.additional-info[_ngcontent-%COMP%]{margin-top:10px;text-align:center}ion-content[_ngcontent-%COMP%]{--background: #1a1a1a;--background: linear-gradient(135deg, #1a1a1a 30%, #666666 100%)}.add-post-btn[_ngcontent-%COMP%]{margin-left:auto}"]}),s})(),canDeactivate:[f.M]}];let F=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[g.iI.forChild(j),g.iI]}),s})(),k=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[m.MD,b.YN,i.bv,F]}),s})()}}]);